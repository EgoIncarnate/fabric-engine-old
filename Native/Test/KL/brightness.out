GlobalList
  StructDecl( 'RGBA' )
    StructDeclMember( 'r', Byte )
    StructDeclMember( 'g', Byte )
    StructDeclMember( 'b', Byte )
    StructDeclMember( 'a', Byte )
  Function( 'brightness' ('brightness'), void )
    ParamList
      Param( 'index', Integer, r-value )
      Param( 'rgba', RGBA, l-value )
      Param( 'sourceRgba', RGBA[], l-value )
      Param( 'brightnessTable', Byte[], l-value )
    CompoundStatement
      StatementList
        StatementList
          AssignedVarDecl( VarDecl( 'inRGBA', RGBA ), IndexOp )
            IndexOp
              Var('sourceRgba')
              Var('index')
        ExprStatement
          AssignOp(ASSIGN_OP)
            StructMemberOp( 'r' )
              Var('rgba')
            IndexOp
              Var('brightnessTable')
              StructMemberOp( 'r' )
                Var('inRGBA')
        ExprStatement
          AssignOp(ASSIGN_OP)
            StructMemberOp( 'g' )
              Var('rgba')
            IndexOp
              Var('brightnessTable')
              StructMemberOp( 'g' )
                Var('inRGBA')
        ExprStatement
          AssignOp(ASSIGN_OP)
            StructMemberOp( 'b' )
              Var('rgba')
            IndexOp
              Var('brightnessTable')
              StructMemberOp( 'b' )
                Var('inRGBA')
        ExprStatement
          AssignOp(ASSIGN_OP)
            StructMemberOp( 'a' )
              Var('rgba')
            StructMemberOp( 'a' )
              Var('inRGBA')
  Function( 'entry' ('entry'), void )
    ParamList
    CompoundStatement
      StatementList
        StatementList
          AssignedVarDecl( VarDecl( 'index', Integer ), ConstSize( 546 ) )
            ConstSize( 546 )
        StatementList
          VarDecl( 'sourceRGBA', RGBA[] )
        ExprStatement
          MethodOp( 'resize' )
            Var('sourceRGBA')
            ArgList
              ConstSize( 1024 )
        ExprStatement
          AssignOp(ASSIGN_OP)
            StructMemberOp( 'r' )
              IndexOp
                Var('sourceRGBA')
                Var('index')
            ConstSize( 56 )
        ExprStatement
          AssignOp(ASSIGN_OP)
            StructMemberOp( 'g' )
              IndexOp
                Var('sourceRGBA')
                Var('index')
            ConstSize( 98 )
        ExprStatement
          AssignOp(ASSIGN_OP)
            StructMemberOp( 'b' )
              IndexOp
                Var('sourceRGBA')
                Var('index')
            ConstSize( 123 )
        ExprStatement
          AssignOp(ASSIGN_OP)
            StructMemberOp( 'a' )
              IndexOp
                Var('sourceRGBA')
                Var('index')
            ConstSize( 255 )
        StatementList
          VarDecl( 'brightnessTable', Byte[] )
        CStyleLoop
          AssignedVarDecl( VarDecl( 'i', Size ), ConstSize( 0 ) )
            ConstSize( 0 )
          BinOp( LT )
            Var('i')
            ConstSize( 256 )
          UniOp( prefix ++ )
            Var('i')
          ExprStatement
            MethodOp( 'push' )
              Var('brightnessTable')
              ArgList
                CastNode( Byte )
                  Var('i')
        StatementList
          VarDecl( 'rgba', RGBA )
        ExprStatement
          Call('brightness')
            ArgList
              Var('index')
              Var('rgba')
              Var('sourceRGBA')
              Var('brightnessTable')
        Report
          Var('rgba')
{r:56,g:98,b:123,a:255}
